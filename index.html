<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boda de Alejandro & Andrea</title>

  <!-- Metadatos -->
  <meta name="description" content="¬°Bienvenidos a nuestro espacio de boda! Nos hace una enorme ilusi√≥n que nos acompa√±√©is en este momento tan especial de nuestras vidas. Aqu√≠ podr√©is compartir con nosotros vuestras preferencias para que todo est√© perfecto y tambi√©n encontrar toda la informaci√≥n sobre la celebraci√≥n. ¬°Gracias de coraz√≥n por formar parte de nuestra historia! üíñ">
  <meta name="theme-color" content="#b87b5a">
  <meta name="author" content="Alejandro & Andrea">
  <meta name="robots" content="index, follow">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="mi_foto_boda_v31.png">

  <!-- Tipograf√≠as -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel="stylesheet">

  <style>
    :root {
      --brand: #b87b5a;
      --ink: #2b2b2b;
      --cream-bg: #f8f1e3;
      --overlay: rgba(0, 0, 0, 0.35);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: radial-gradient(circle at top center, #f9f4e8 0%, #f8f1e3 40%, #f6ebd8 100%);
      font-family: 'Lora', serif;
      color: var(--ink);
      overflow-x: hidden;
      animation: fadeIn 4s ease-in-out;
      transition: filter 0.5s ease, background-color 0.5s ease;
    }

    body.modal-open {
      filter: blur(8px) brightness(0.8);
      pointer-events: none;
      user-select: none;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    header {
      text-align: center;
      padding: 40px 20px;
      animation: fadeUp 2s ease-in-out;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .title {
      font-family: 'Great Vibes', cursive;
      font-size: 58px;
      color: #a00034;
      margin-bottom: 10px;
    }

    .subtitle {
      font-family: 'Bradley Hand ITC', cursive, sans-serif;
      font-size: 22px;
      color: #5a4b2b;
      line-height: 1.6;
      max-width: 800px;
      margin: 0 auto;
    }

    /* Cuenta atr√°s */
    .countdown-section {
      text-align: center;
      margin: 40px auto;
      animation: fadeUp 4s ease-in-out;
    }

    .countdown-section h2 {
      font-family: 'Great Vibes', cursive;
      font-size: 36px;
      color: #a00034;
      margin-bottom: 15px;
    }

    #countdown {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .time-box {
      background: rgba(255,255,255,0.7);
      border: 2px solid #c9ab83;
      border-radius: 16px;
      padding: 15px 25px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .time-box span {
      font-size: 28px;
      font-weight: bold;
      color: var(--brand);
      display: block;
    }

    .time-box small {
      font-size: 14px;
      font-family: 'Playfair Display', serif;
    }

    /* Fecha */
    .date-box {
      text-align: center;
      margin: 30px auto;
      font-size: 38px;
      font-family: 'Great Vibes', cursive;
      color: #a00034;
      border: 2px solid #a00034;
      display: inline-block;
      padding: 10px 25px;
      border-radius: 12px;
      background: rgba(255,255,255,0.7);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      animation: fadeUp 4s ease-in-out;
    }

    /* Iconos */
    .icon-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 16px;
      margin: 50px auto;
      max-width: 720px;
      animation: fadeUp 4s ease-in-out;
    }

    .icon-button {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(250,240,240,0.9);
      padding: 16px;
      border-radius: 16px;
      border: 2px solid #000;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
      min-width: 100px;
    }

    .icon-button:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.2);
    }

    .icon-button span {
      margin-top: 8px;
      font-weight: bold;
      color: #000;
      text-transform: uppercase;
      font-size: 14px;
    }

    .icon-img {
      width: 60px;
      height: auto;
    }

    /* Foto */
    .boda-foto {
      width: 100%;
      max-width: 900px;
      margin: 50px auto;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 6px 18px rgba(0,0,0,0.2);
      animation: fadeUp 4s ease-in-out;
    }

    .boda-foto img {
      width: 100%;
      height: auto;
      display: block;
    }

    /* Logo */
    .logo-fecha {
      text-align: center;
      margin: 30px 0;
      animation: fadeUp 4s ease-in-out;
    }

    .logo-fecha img {
      width: 140px;
      opacity: 0.95;
    }

    /* Frase final */
    .mensaje-final {
      text-align: center;
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      color: #5a4b2b;
      margin: 40px 20px;
      line-height: 1.6;
      animation: fadeUp 4s ease-in-out;
    }

    footer {
      text-align: center;
      padding: 20px;
      font-size: 13px;
      color: #000;
      opacity: 0.8;
      animation: fadeUp 4s ease-in-out;
    }
   /* === MODALES REFINADOS === */
.modal {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(0, 0, 0, 0.45); /* oscurecimiento suave */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.4s ease, visibility 0.4s ease;
  z-index: 1000;
  backdrop-filter: blur(6px); /* desenfoque solo del fondo */
}

.modal.show {
  opacity: 1;
  visibility: visible;
}

.modal-content {
  background: rgba(248,229,216,0.97);
  border-radius: 16px;
  padding: 30px 25px;
  max-width: 600px;
  width: 90%;
  color: #000;
  border: 2px solid #000;
  box-shadow: 0 8px 24px rgba(0,0,0,0.25);
  transform: scale(0.9);
  opacity: 0;
  transition: all 0.4s ease;
  position: relative;
  z-index: 1001;
}

.modal.show .modal-content {
  transform: scale(1);
  opacity: 1;
}


    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .close-btn img {
      width: 28px;
    }
  </style>
</head>

<body>
  <header>
    <h1 class="title">Boda de Alejandro & Andrea</h1>
    <p class="subtitle">
      ¬°Bienvenidos a nuestro espacio de boda! Nos hace una enorme ilusi√≥n que nos acompa√±√©is en este momento tan especial de nuestras vidas.
      Aqu√≠ podr√©is compartir con nosotros vuestras preferencias para que todo est√© perfecto y tambi√©n encontrar toda la informaci√≥n sobre la celebraci√≥n.
      ¬°Gracias de coraz√≥n por formar parte de nuestra historia! üíñ
    </p>
  </header>

  <!-- Cuenta atr√°s -->
  <section class="countdown-section">
    <h2>Cuenta atr√°s</h2>
    <div id="countdown">
      <div class="time-box"><span id="days">0</span><small>D√≠as</small></div>
      <div class="time-box"><span id="hours">0</span><small>Horas</small></div>
      <div class="time-box"><span id="minutes">0</span><small>Min</small></div>
      <div class="time-box"><span id="seconds">0</span><small>Seg</small></div>
    </div>
  </section>

  <div class="date-box">17 ¬∑ Octubre ¬∑ 2026</div>

  <!-- Accesos -->
  <div class="icon-container">
    <button class="icon-button" id="ubicacionBtn">
      <img src="mi_foto_boda_v33.png" alt="Ubicaci√≥n" class="icon-img">
      <span>Ubicaci√≥n</span>
    </button>
    <button class="icon-button" id="asistenciaBtn">
      <img src="mi_foto_boda_v26.png" alt="Asistencia" class="icon-img">
      <span>Asistencia</span>
    </button>
    <button class="icon-button" id="trasladoBtn">
      <img src="mi_foto_boda_v27.png" alt="Traslado" class="icon-img">
      <span>Traslado</span>
    </button>
    <button class="icon-button" id="recuerdosBtn">
      <img src="recuerdos.png" alt="Recuerdos" class="icon-img">
      <span>Recuerdos</span>
    </button>
  </div>

  <!-- Foto -->
  <div class="boda-foto">
    <img src="mi_foto_boda_v39.JPG" alt="Foto de compromiso Alejandro y Andrea">
  </div>

  <!-- Logo -->
  <div class="logo-fecha">
    <img src="mi_foto_boda_v31.png" alt="Logo Alejandro y Andrea">
  </div>

  <!-- Frase final -->
  <div class="mensaje-final">
    Gracias por acompa√±arnos en este camino tan especial.<br>
    Con cari√±o, <strong>Alejandro & Andrea</strong>.
  </div>

  <footer>¬© Alejandro & Andrea</footer>

  <!-- MODAL ASISTENCIA -->
  <div id="asistenciaModal" class="modal">
    <div class="modal-content">
      <button class="close-btn" id="closeAsistencia"><img src="mi_foto_boda_v36.png" alt="Cerrar"></button>
      <div class="asistencia-title">
        <img src="mi_foto_boda_v32.png" alt="Cuestionario de asistencia" style="max-width:100px;display:block;margin:0 auto;">
        <h3 style="text-align:center;font-family:'Playfair Display',serif;font-size:26px;font-weight:700;color:#000;margin-top:10px;margin-bottom:15px;">Cuestionario de asistencia</h3>
      </div>
      <!-- formulario original id√©ntico -->
      <form id="rsvpForm" action="https://script.google.com/macros/s/AKfycbyR0kDkPjKhyVGAqirWjeG7KxL917Tz1tfJOo17r6v06V4JT2cPcjjHyYR8_CvZ_Ab-Kg/exec" method="POST" novalidate>
        <label for="nombre">Nombre y apellidos *</label>
        <input id="nombre" name="nombre" type="text" required placeholder="Ej. Ana P√©rez">
        <label>¬øAsistir√°s a la boda? *</label>
        <div style="display:flex;justify-content:center;gap:10px;">
          <label><input type="radio" name="asistencia" value="s√≠" required> S√≠</label>
          <label><input type="radio" name="asistencia" value="no" required> No</label>
        </div>
        <label for="acompanantes">¬øCu√°ntos acompa√±antes?</label>
        <input id="acompanantes" name="acompanantes" type="number" min="0" max="10" value="0">
        <label for="alergias">¬øTienes alguna alergia o preferencia alimentaria?</label>
        <input id="alergias" name="alergias" type="text">
        <label for="mensaje">¬øQu√© canci√≥n te gusta para que suene en la fiesta?</label>
        <textarea id="mensaje" name="mensaje" placeholder=" "></textarea>
        <div style="text-align:center;margin-top:15px;">
          <button type="submit" style="padding:10px 18px;border:0;border-radius:999px;background:#a00034;color:#fff;font-weight:600;font-size:15px;cursor:pointer;">Enviar confirmaci√≥n</button>
        </div>
      </form>
      <div id="successBox" style="display:none;text-align:center;margin-top:15px;"><h3>¬°Gracias por tu respuesta! üíå</h3></div>
      <div id="errorBox" style="display:none;text-align:center;margin-top:15px;"><h3>Vaya, algo no ha ido bien‚Ä¶</h3></div>
    </div>
  </div>

  <!-- MODAL TRASLADO -->
  <div id="trasladoModal" class="modal">
    <div class="modal-content">
      <button class="close-btn" id="closeTraslado"><img src="mi_foto_boda_v36.png" alt="Cerrar"></button>
      <div style="text-align:center;">
        <img src="mi_foto_boda_v29.png" alt="Traslado" style="width:60px;margin-bottom:10px;">
        <h3 style="font-family:'Playfair Display',serif;font-size:26px;font-weight:700;color:#a00034;">Traslado de invitados</h3>
        <p style="font-size:16px;line-height:1.6;color:#333;">
          Cuando se acerque nuestro gran d√≠a, aqu√≠ encontrar√©is todos los detalles sobre el servicio de autobuses.
          Compartiremos los horarios y puntos de recogida en Pamplona para acompa√±arnos hasta el banquete en el Palacio de Olloqui,
          as√≠ como el regreso tras la fiesta para volver c√≥modamente a Pamplona.
          ¬°Queremos que disfrut√©is al m√°ximo, sin preocuparos de nada m√°s que de celebrar con nosotros!
        </p>
      </div>
    </div>
  </div>

  <!-- MODAL UBICACI√ìN -->
  <div id="ubicacionModal" class="modal">
    <div class="modal-content">
      <button class="close-btn" id="closeUbicacion"><img src="mi_foto_boda_v36.png" alt="Cerrar"></button>
      <div style="text-align:center;">
        <img src="mi_foto_boda_v28.png" alt="Ceremonia" style="width:60px;margin-bottom:10px;">
        <h3 style="font-family:'Playfair Display',serif;font-size:22px;font-weight:700;color:#000;">Ceremonia religiosa</h3>
        <p>La ceremonia religiosa tendr√° lugar en la Catedral de Santa Mar√≠a la Real de Pamplona, un lugar √∫nico y lleno de historia.</p>
        <p>üìç <a href="https://www.google.com/maps/search/?api=1&query=42.819637,-1.641684" target="_blank">Ver ubicaci√≥n en Google Maps</a></p>
        <br>
        <img src="mi_foto_boda_v34.png" alt="Banquete" style="width:60px;margin-bottom:10px;">
        <h3 style="font-family:'Playfair Display',serif;font-size:22px;font-weight:700;color:#000;">Banquete</h3>
        <p>Continuaremos la celebraci√≥n en el Palacio Cabo de Armer√≠a de Olloqui.</p>
        <p>üìç <a href="https://www.google.com/maps/search/?api=1&query=42.840699,-1.581877" target="_blank">Ver ubicaci√≥n en Google Maps</a></p>
      </div>
    </div>
  </div>

  <!-- MODAL RECUERDOS -->
  <div id="recuerdosModal" class="modal">
    <div class="modal-content">
      <button class="close-btn" id="closeRecuerdos"><img src="mi_foto_boda_v36.png" alt="Cerrar"></button>
      <div style="text-align:center;">
        <img src="mi_foto_boda_v38.png" alt="C√°mara" style="width:60px;margin-bottom:8px;">
        <h3 style="font-family:'Playfair Display',serif;font-size:26px;font-weight:700;color:#a00034;">Rinc√≥n de los recuerdos</h3>
        <p style="font-size:16px;line-height:1.6;color:#333;">
          El d√≠a de nuestra boda estar√° inmortalizado por un fot√≥grafo profesional üì∑,
          pero tambi√©n queremos ver la celebraci√≥n a trav√©s de vuestros ojos.
          Os invitamos a subir aqu√≠ las fotos espont√°neas que hag√°is con vuestro m√≥vil.
        </p>
        <form id="recuerdosForm">
          <input type="file" id="foto" name="foto" accept="image/*" multiple required><br><br>
          <button type="submit" style="padding:10px 18px;border:0;border-radius:999px;background:#a00034;color:#fff;font-weight:600;font-size:15px;cursor:pointer;">Enviar fotos</button>
        </form>
        <div id="recuerdosMsg" style="margin-top:10px;font-size:14px;"></div>
      </div>
    </div>
  </div>
    <script>
    document.addEventListener("DOMContentLoaded", () => {

      /* === EFECTO DESENFOQUE DEL FONDO CUANDO SE ABRE UN MODAL === */
      function toggleBlur(isOpen) {
        if (isOpen) document.body.classList.add("modal-open");
        else document.body.classList.remove("modal-open");
      }

      /* === FUNCI√ìN GENERAL PARA MODALES === */
      function setupModal(openBtnId, modalId, closeBtnId) {
        const openBtn = document.getElementById(openBtnId);
        const modal = document.getElementById(modalId);
        const closeBtn = document.getElementById(closeBtnId);

        openBtn.addEventListener("click", () => {
          modal.classList.add("show");
          toggleBlur(true);
        });

        closeBtn.addEventListener("click", () => {
          modal.classList.remove("show");
          toggleBlur(false);
        });

        modal.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.classList.remove("show");
            toggleBlur(false);
          }
        });

        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && modal.classList.contains("show")) {
            modal.classList.remove("show");
            toggleBlur(false);
          }
        });
      }

      setupModal("asistenciaBtn", "asistenciaModal", "closeAsistencia");
      setupModal("trasladoBtn", "trasladoModal", "closeTraslado");
      setupModal("ubicacionBtn", "ubicacionModal", "closeUbicacion");
      setupModal("recuerdosBtn", "recuerdosModal", "closeRecuerdos");

      /* === CUENTA ATR√ÅS === */
      const weddingDate = new Date("Oct 17, 2026 12:00:00").getTime();
      const daysEl = document.getElementById("days");
      const hoursEl = document.getElementById("hours");
      const minutesEl = document.getElementById("minutes");
      const secondsEl = document.getElementById("seconds");

      const timer = setInterval(() => {
        const now = new Date().getTime();
        const distance = weddingDate - now;

        if (distance <= 0) {
          clearInterval(timer);
          document.getElementById("countdown").innerHTML = "üíç ¬°Hoy es el gran d√≠a!";
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        daysEl.textContent = days;
        hoursEl.textContent = hours;
        minutesEl.textContent = minutes;
        secondsEl.textContent = seconds;
      }, 1000);

      /* === ENV√çO FORMULARIO ASISTENCIA === */
      const form = document.getElementById('rsvpForm');
      if (form) {
        const successBox = document.getElementById('successBox');
        const errorBox = document.getElementById('errorBox');
        const submitBtn = form.querySelector("button[type='submit']");

        form.addEventListener('submit', async (e) => {
          e.preventDefault();

          submitBtn.disabled = true;
          const spinner = document.createElement("span");
          spinner.textContent = " ‚è≥";
          submitBtn.appendChild(spinner);

          const data = new FormData(form);

          try {
            const response = await fetch(form.action, {
              method: form.method,
              body: data,
              headers: { 'Accept': 'application/json' }
            });

            if (response.ok) {
              form.style.display = 'none';
              errorBox.style.display = 'none';
              successBox.style.display = 'block';
              setTimeout(() => {
                successBox.style.display = 'none';
                form.style.display = 'block';
                submitBtn.disabled = false;
                spinner.remove();
                form.reset();
                document.getElementById("asistenciaModal").classList.remove("show");
                toggleBlur(false);
              }, 3000);
            } else {
              throw new Error("Error en el env√≠o");
            }
          } catch (err) {
            successBox.style.display = 'none';
            errorBox.style.display = 'block';
            setTimeout(() => {
              errorBox.style.display = 'none';
              form.style.display = 'block';
              submitBtn.disabled = false;
              spinner.remove();
            }, 3000);
          }
        });
      }

      /* === ENV√çO FORMULARIO RECUERDOS === */
      const recuerdosForm = document.getElementById("recuerdosForm");
      const recuerdosMsg = document.getElementById("recuerdosMsg");

      if (recuerdosForm) {
        recuerdosForm.addEventListener("submit", async (e) => {
          e.preventDefault();
          recuerdosMsg.innerHTML = "";
          const files = document.getElementById("foto").files;
          const submitBtn = recuerdosForm.querySelector('button[type="submit"]');

          if (files.length === 0) {
            recuerdosMsg.textContent = "‚ö†Ô∏è Selecciona al menos una foto.";
            return;
          }

          submitBtn.disabled = true;
          const spinner = document.createElement("span");
          spinner.textContent = " ‚è≥";
          submitBtn.appendChild(spinner);

          for (const file of files) {
            try {
              const reader = new FileReader();
              const base64 = await new Promise((resolve, reject) => {
                reader.onloadend = () => resolve(reader.result.split(",")[1]);
                reader.onerror = reject;
                reader.readAsDataURL(file);
              });

              const response = await fetch("https://script.google.com/macros/s/AKfycbwN9bUuAkucwZ3kpuYLdzDqGfnIgwzyQ-q5Wz5qxleE4LRKk5_A0nZ459TZrk4E9WZDvQ/exec", {
                method: "POST",
                body: new URLSearchParams({
                  foto: base64,
                  nombreArchivo: file.name,
                  mimeType: file.type
                })
              });

              const result = await response.json();
              if (result.status === "ok") {
                recuerdosMsg.innerHTML += `‚úÖ ${file.name} subida correctamente<br>`;
              } else {
                recuerdosMsg.innerHTML += `‚ùå Error al subir ${file.name}<br>`;
              }
            } catch (err) {
              recuerdosMsg.innerHTML += `‚ö†Ô∏è Fallo al subir ${file.name}: ${err.message}<br>`;
            }
          }

          submitBtn.disabled = false;
          spinner.remove();
        });
      }
    });
      /* === Soporte para bot√≥n ATR√ÅS del m√≥vil === */
const modales = document.querySelectorAll(".modal");

function closeAllModals() {
  modales.forEach(modal => modal.classList.remove("show"));
  history.pushState(null, "", location.href.split("#")[0]);
  document.body.classList.remove("modal-open");
}

window.addEventListener("popstate", () => {
  closeAllModals();
});

/* Reescribir setupModal para incluir historial */
function setupModal(openBtnId, modalId, closeBtnId) {
  const openBtn = document.getElementById(openBtnId);
  const modal = document.getElementById(modalId);
  const closeBtn = document.getElementById(closeBtnId);

  openBtn.addEventListener("click", () => {
    modal.classList.add("show");
    history.pushState({ modal: modalId }, "", "#" + modalId);
  });

  closeBtn.addEventListener("click", closeAllModals);

  modal.addEventListener("click", (e) => {
    if (e.target === modal) closeAllModals();
  });
}

  </script>
</body>
</html>












