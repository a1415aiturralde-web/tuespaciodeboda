<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boda de Alejandro & Andrea</title>

  <!-- Metadatos -->
  <meta name="description" content="¡Bienvenidos a nuestro espacio de boda! Nos hace una enorme ilusión que nos acompañéis en este momento tan especial de nuestras vidas. Aquí podréis compartir con nosotros vuestras preferencias para que todo esté perfecto y también encontrar toda la información sobre la celebración. ¡Gracias de corazón por formar parte de nuestra historia!">
  <meta name="theme-color" content="#b87b5a">
  <meta name="author" content="Alejandro & Andrea">
  <meta name="robots" content="index, follow">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="mi_foto_boda_v31.png">

  <!-- Tipografías -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Tangerine:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --brand: #b87b5a;
      --ink: #2b2b2b;
      --cream-bg: #f8f1e3;
      --overlay: rgba(0, 0, 0, 0.35);
      --olive: #6b8e23; /* verde oliva */
      --garnet: #a00034; /* granate */
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background-color: #faf8f5;
      background-image:
        radial-gradient(1100px 700px at 50% -10%, rgba(0,0,0,0.04), rgba(0,0,0,0) 60%),
        url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'>\
<filter id='n'>\
<feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/>\
<feColorMatrix type='saturate' values='0'/>\
<feComponentTransfer><feFuncA type='table' tableValues='0 0.045'/></feComponentTransfer>\
</filter>\
<rect width='100%' height='100%' filter='url(#n)'/>\
</svg>");
      background-repeat: no-repeat, repeat;
      background-size: cover, 300px 300px;
      background-attachment: fixed, scroll;
      background-blend-mode: multiply, normal;
    }

    @keyframes fadeIn { 0% { opacity: 0; transform: translateY(30px); } 100% { opacity: 1; transform: translateY(0); } }

    /* Fondo principal que se desenfoca */
    #page-wrapper { transition: filter 0.6s ease, opacity 0.6s ease; }
    #page-wrapper.blurred { filter: blur(6px) brightness(0.8); pointer-events: none; user-select: none; }

    header {
      text-align: center;
      padding: 25px 30px;
      background: none;
      border: none;
      box-shadow: none;
      max-width: 500px;
      margin: 60px auto 10px;
      animation: fadeUp 2s ease-in-out;
    }

    @keyframes textFadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeUp { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

    header .title, header .subtitle { opacity: 0; animation: textFadeIn 2s ease forwards; }
    header .title { animation-delay: 0.5s; }
    header .subtitle { animation-delay: 1.2s; }

    .title {
      font-family: 'Tangerine', cursive;
      font-size: 60px;
      letter-spacing: 3px;
      color: var(--olive);
      font-weight: 700;
      display: inline-block;
      position: relative;
      padding-bottom: 10px;
    }

    .title-line {
      width: 80%;
      max-width: 250px;
      height: 2px;
      background-color: #000;
      margin: 12px auto 0;
      border-radius: 2px;
    }

    .subtitle {
      font-family: 'Playfair Display', serif;
      font-size: 22px;
      color: #000;
      line-height: 1.6;
      max-width: 800px;
      margin: 0 auto;
    }

    .subtitle-box {
      text-align: center;
      padding: 25px 30px;
      border: 2px solid #000;
      border-radius: 25px;
      max-width: 900px;
      margin: 40px auto;
      background:
        linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.25)),
        url("mi_foto_boda_v41.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
      animation: fadeUp 2s ease-in-out;
      box-sizing: border-box;
    }
    .subtitle-box p + p { margin-top: 15px; }

    /* === CUENTA ATRÁS === */
    .countdown-section { text-align: center; margin: 20px auto 40px; padding: 20px; max-width: 600px; }

    #countdown {
      display: flex; justify-content: center; align-items: flex-start; gap: 50px;
      margin-top: 15px; position: relative;
    }

    .time-box { display: flex; flex-direction: column; align-items: center; position: relative; font-family: 'Cinzel', serif; color: #000; text-align: center; }
    .time-box span { font-size: 36px; font-weight: 700; line-height: 1.1; transition: opacity 0.4s ease, transform 0.4s ease; }
    .time-box span.change { opacity: 0.6; transform: scale(1.05); }
    .time-box small { font-size: 13px; letter-spacing: 1.5px; text-transform: uppercase; font-weight: 600; margin-top: 6px; color: #000; }
    .time-box:not(:last-child)::after { content: "·"; position: absolute; right: -30px; top: 25%; transform: translateY(-50%); font-size: 28px; color: #000; font-weight: 400; }

    @media (max-width: 600px) {
      header { padding: 25px 15px; border-radius: 20px; max-width: 90%; }
      #countdown { gap: 30px; }
      .time-box span { font-size: 28px; }
      .time-box small { font-size: 11px; letter-spacing: 1px; }
      .time-box:not(:last-child)::after { right: -18px; font-size: 22px; top: 22%; }
    }

    /* === RECUADRO FECHA === */
    .date-box {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      margin: 20px auto; padding: 28px 50px; gap: 10px;
      background:
        linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.25)),
        url("mi_foto_boda_v41.png");
      background-size: cover; background-position: center; background-repeat: no-repeat;
      border-radius: 20px; border: 2px solid #000; box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      font-family: 'Cinzel', serif; color: #000; text-align: center; letter-spacing: 3px; width: fit-content;
    }
    .date-box .join { margin: 0; font-family: 'Cinzel', serif; font-size: 20px; font-weight: 700; letter-spacing: 2px; color: #000; }
    .date-box span { font-size: 26px; font-weight: 700; letter-spacing: 6px; color: #000; text-shadow: 1px 1px 3px rgba(255,255,255,0.6); }

    @media (max-width: 600px) {
      .date-box { padding: 24px 32px; gap: 8px; }
      .date-box .join { font-size: 18px; letter-spacing: 1.5px; }
      .date-box span { font-size: 24px; letter-spacing: 5px; }
    }

    .wedding-day-title {
      font-family: 'Cinzel', serif; font-size: 15px; font-weight: 700; color: #000; text-align: center;
      letter-spacing: 3px; margin-top: 10px; margin-bottom: 25px; text-transform: uppercase;
    }

    /* === BOTONES DE ACCESO === */
    .icon-container { display: flex; flex-direction: column; align-items: center; gap: 25px; margin: 60px auto; max-width: 650px; animation: fadeUp 2s ease-in-out; }
    .icon-button {
      display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; padding: 30px 20px;
      border-radius: 20px; border: 2px solid #000;
      background:
        linear-gradient(rgba(255,255,255,0.85), rgba(255,255,255,0.25)),
        url("mi_foto_boda_v41.png");
      background-size: cover; background-position: center; background-repeat: no-repeat;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer; text-align: center;
    }
    .icon-button:hover { transform: translateY(-6px); box-shadow: 0 8px 24px rgba(0,0,0,0.2); }
    .icon-img { width: 70px; height: auto; margin-bottom: 10px; }
    .icon-button span { font-family: 'Cinzel', serif; font-size: 18px; font-weight: 700; color: var(--garnet); letter-spacing: 2px; text-transform: uppercase; }

    @media (max-width: 600px) {
      .icon-container { max-width: 90%; }
      .icon-button { padding: 25px 15px; }
      .icon-button span { font-size: 16px; }
    }

    /* Foto y pie */
    .boda-foto { width: 100%; max-width: 900px; margin: 50px auto; border-radius: 20px; overflow: hidden; box-shadow: 0 6px 18px rgba(0,0,0,0.2); animation: fadeUp 4s ease-in-out; }
    .boda-foto img { width: 100%; display: block; }
    .logo-fecha { text-align: center; margin: 30px 0; animation: fadeUp 4s ease-in-out; }
    .logo-fecha img { width: 140px; opacity: 0.95; }
    .mensaje-final { text-align: center; font-family: 'Playfair Display', serif; font-size: 18px; color: #000; margin: 40px 20px; line-height: 1.6; animation: fadeUp 4s ease-in-out; font-weight: 700; }
    footer { text-align: center; padding: 20px; font-size: 13px; color: #000; opacity: 0.8; animation: fadeUp 4s ease-in-out; font-weight: 700; }

    /* === MODALES === */
    .modal {
      position: fixed; inset: 0; display: flex; justify-content: center; align-items: center;
      background: rgba(0,0,0,0.45); opacity: 0; visibility: hidden;
      transition: opacity 0.4s ease, visibility 0.4s ease; z-index: 10000; backdrop-filter: blur(6px);
    }
    .modal.show { opacity: 1; visibility: visible; }

    .modal-content {
      background:
        linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.25)),
        url("mi_foto_boda_v41.png");
      border-radius: 16px; padding: 24px 22px; max-width: 560px; width: 92%; max-height: 85vh; overflow-y: auto;
      color: #000; border: 2px solid #000; box-shadow: 0 8px 24px rgba(0,0,0,0.25);
      transform: scale(0.96); opacity: 0; transition: all 0.35s ease; position: relative; z-index: 10001;
      scrollbar-width: thin; scrollbar-color: var(--garnet) #f8f1e3;
    }
    .modal.show .modal-content { transform: scale(1); opacity: 1; }

    .modal-content::-webkit-scrollbar { width: 8px; }
    .modal-content::-webkit-scrollbar-track { background: #f8f1e3; border-radius: 10px; }
    .modal-content::-webkit-scrollbar-thumb { background-color: var(--garnet); border-radius: 10px; }

    .close-btn { position: absolute; top: 15px; right: 20px; background: none; border: none; cursor: pointer; }
    .close-btn img { width: 28px; }

    /* === Títulos y textos dentro de modales === */
    .modal-content h3.modal-title {
      font-family: 'Cinzel', serif; font-size: 26px; color: var(--olive); text-align: center; font-weight: 700;
      margin-top: 10px; margin-bottom: 18px; letter-spacing: 2px;
    }
    .modal-content h4.modal-subtitle {
      font-family: 'Playfair Display', serif; font-size: 22px; color: var(--garnet); text-align: center; font-weight: 700;
      margin-top: 16px; margin-bottom: 12px; letter-spacing: 1px;
    }
    .modal-content p {
      font-family: 'Lora', serif; font-size: 18px; color: #2b2b2b; text-align: center; line-height: 1.7; font-weight: 400; margin-bottom: 14px;
    }
    .modal-content a { color: var(--garnet); font-weight: 600; text-decoration: none; }
    .modal-content a:hover { text-decoration: underline; }

    /* === Estilos específicos Asistencia (unificado a .modal-content) === */
    #asistenciaModal .asistencia-content { /* solo añadimos modificadores si hace falta; ya hereda .modal-content */ }

    .asistencia-title { text-align: center; margin-bottom: 12px; }
    .asistencia-title img { max-width: 100px; height: auto; display: inline-block; }
    .asistencia-title h3 {
      font-family: 'Playfair Display', serif; font-size: 26px; font-weight: 700;
      color: var(--olive); text-align: center; margin-top: 10px; margin-bottom: 10px;
    }

    /* Formularios */
    #rsvpForm { max-width: 320px; margin: 0 auto; text-align: center; box-sizing: border-box; }
    #rsvpForm input, #rsvpForm select, #rsvpForm textarea {
      width: 100%; max-width: 300px; margin: 0 auto 15px; display: block; text-align: center; box-sizing: border-box;
      padding: 12px 14px; border-radius: 12px; font-size: 15px; background: rgba(250,240,240,1);
      font-weight: bold; color: #000; border: 2px solid #000;
    }
    label {
      display: inline-block; font-size: 20px; color: #000; margin: 12px 0 6px; font-weight: bold;
      background: rgba(250,240,240,1); padding: 2px 6px; border-radius: 4px; border: 2px solid #000;
    }
    .radio-row { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; }
    .chip {
      display: inline-flex; align-items: center; justify-content: center; padding: 10px 18px;
      border: 2px solid var(--brand); border-radius: 999px; cursor: pointer; user-select: none; font-weight: bold;
      transition: all 0.2s ease-in-out; color: var(--ink); background: rgba(250,240,240,0.8);
      font-size: 16px; position: relative;
    }
    .chip input { position: absolute; opacity: 0; pointer-events: none; }
    .chip span { display: inline-block; transition: all 0.2s ease-in-out; }
    .chip input:checked + span { background: var(--brand); color: #fff; border-color: var(--brand); padding: 12px 22px; transform: scale(1.05); }

    .actions { display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 20px; }
    .actions button {
      padding: 12px 18px; border: 0; border-radius: 999px; background: var(--garnet); color: #fff; font-weight: 600;
      font-size: 15px; cursor: pointer; box-shadow: 0 6px 14px rgba(0,0,0,0.2); transition: all 0.3s ease;
    }
    .actions button:hover { filter: brightness(0.9); transform: translateY(-2px); }

    /* Animación de entrada común */
    .modal .asistencia-content, .modal .traslado-content, .modal .recuerdos-content, .modal .ubicacion-content {
      opacity: 0; transform: scale(0.96) translateY(-6px); transition: opacity 0.35s ease, transform 0.35s ease;
    }
    .modal.show .asistencia-content, .modal.show .traslado-content, .modal.show .recuerdos-content, .modal.show .ubicacion-content {
      opacity: 1; transform: scale(1) translateY(0);
    }

    /* === *** RINCÓN DE LOS RECUERDOS – estilos recuperados *** === */
    #recuerdosForm { text-align: center; }
    #recuerdosForm input[type="file"] { display: none; } /* oculta el input nativo */
    .file-label {
      display: inline-block; padding: 10px 18px; border-radius: 999px;
      border: 2px solid var(--garnet); background: transparent; color: var(--garnet);
      font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.3s ease;
    }
    .file-label:hover { background: var(--garnet); color: #fff; transform: translateY(-2px); }
    #recuerdosMsg { margin-top: 12px; font-weight: 600; color: #000; }
    #recuerdosForm button {
      display: inline-block; margin-top: 15px; padding: 12px 18px; border: 0; border-radius: 999px;
      background: var(--garnet); color: #fff; font-weight: 600; font-size: 15px; cursor: pointer;
      box-shadow: 0 6px 14px rgba(0,0,0,0.2); transition: all 0.3s ease;
    }
    #recuerdosForm button:hover { filter: brightness(0.9); transform: translateY(-2px); }

    /* === BOTÓN HAMBURGUESA === */
    .menu-toggle {
      position: fixed; top: 20px; right: 25px; font-size: 26px; color: #6b4a2b;
      background: rgba(255, 255, 255, 0.95); border: 2px solid #6b4a2b; border-radius: 10px;
      padding: 8px 12px; cursor: pointer; z-index: 5000;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: background 0.3s ease, transform 0.2s ease;
    }
    .menu-toggle:hover { background: #f8f1e3; transform: scale(1.05); }

    /* === MENÚ DESPLEGABLE === */
    .menu-dropdown {
      position: fixed; top: 65px; right: 25px; background: rgba(255, 255, 255, 0.97);
      border: 2px solid #6b4a2b; border-radius: 10px; box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      padding: 10px 0; width: 180px; display: none; flex-direction: column; z-index: 4999;
      animation: slideDown 0.3s ease forwards;
    }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-15px); } to { opacity: 1; transform: translateY(0); } }
    .menu-dropdown ul { list-style: none; margin: 0; padding: 0; }
    .menu-dropdown li { text-align: center; border-bottom: 1px solid rgba(107, 74, 43, 0.2); }
    .menu-dropdown li:last-child { border-bottom: none; }
    .menu-dropdown a { display: block; padding: 10px; color: #6b4a2b; font-family: 'Cinzel', serif; text-decoration: none; transition: background 0.2s ease, color 0.2s ease; }
    .menu-dropdown a:hover { background: #f8f1e3; color: var(--garnet); }
    .menu-dropdown.show { display: flex; }

    /* Scroll suave */
    html { scroll-behavior: smooth; }
    /* === Campo acompañantes animado === */
#rowAcompanantesNombres {
  opacity: 0;
  max-height: 0;
  transform: translateY(-10px);
  overflow: hidden;
  transition: opacity 0.8s ease, max-height 0.8s ease, transform 0.8s ease;
}

#rowAcompanantesNombres.show {
  opacity: 1;
  max-height: 200px;
  transform: translateY(0);
}
    /* Ocultar mensajes de envío por defecto */
#successBox,
#errorBox {
  display: none;
}


  </style>
</head>

<body>
  <!-- === BOTÓN HAMBURGUESA === -->
  <div class="menu-toggle" id="menuToggle">☰</div>

  <!-- === MENÚ DESPLEGABLE === -->
  <nav class="menu-dropdown" id="menuDropdown">
    <ul>
      <li><a href="#ubicacion">Ubicación</a></li>
      <li><a href="#asistencia">Asistencia</a></li>
      <li><a href="#traslado">Traslado</a></li>
      <li><a href="#recuerdos">Recuerdos</a></li>
    </ul>
  </nav>

  <!-- 💫 CONTENEDOR PRINCIPAL -->
  <div id="page-wrapper">
    <header>
      <h1 class="title">Alejandro<br>&<br>Andrea</h1>
      <div class="title-line"></div>
    </header>

    <!-- Cuenta atrás -->
    <section class="countdown-section">
      <div class="date-box">
        <h2 class="join">Únete a nosotros el</h2>
        <span>17 · 10 · 2026</span>
      </div>

      <h3 class="wedding-day-title">Día de la boda</h3>
      <div id="countdown">
        <div class="time-box"><span id="days">0</span><small>Días</small></div>
        <div class="time-box"><span id="hours">0</span><small>Horas</small></div>
        <div class="time-box"><span id="minutes">0</span><small>Min</small></div>
        <div class="time-box"><span id="seconds">0</span><small>Seg</small></div>
      </div>
    </section>

    <div class="subtitle-box">
      <p class="subtitle">¡Bienvenidos a nuestro espacio de boda!</p>
      <p class="subtitle">
        Nos hace una enorme ilusión que nos acompañéis en este momento tan especial de nuestras vidas.
        Aquí podréis compartir con nosotros vuestras preferencias para que todo esté perfecto
        y también encontrar toda la información sobre la celebración.
        ¡Gracias de corazón por formar parte de nuestra historia!
      </p>
    </div>

    <!-- Foto -->
    <div class="boda-foto">
      <img src="mi_foto_boda_v39.JPG" alt="Foto de compromiso Alejandro y Andrea">
    </div>
    <span id="ubicacion"></span>
    <span id="asistencia"></span>
    <span id="traslado"></span>
    <span id="recuerdos"></span>

    <!-- Accesos -->
    <div class="icon-container">
      <button type="button" class="icon-button" id="ubicacionBtn">
        <img src="mi_foto_boda_v33.png" alt="Ubicación" class="icon-img">
        <span>Ubicación</span>
      </button>
      <button type="button" class="icon-button" id="asistenciaBtn">
        <img src="mi_foto_boda_v26.png" alt="Asistencia" class="icon-img">
        <span>Asistencia</span>
      </button>
      <button type="button" class="icon-button" id="trasladoBtn">
        <img src="mi_foto_boda_v27.png" alt="Traslado" class="icon-img">
        <span>Traslado</span>
      </button>
      <button type="button" class="icon-button" id="recuerdosBtn">
        <img src="recuerdos.png" alt="Recuerdos" class="icon-img">
        <span>Recuerdos</span>
      </button>
    </div>

    <!-- Logo -->
    <div class="logo-fecha">
      <img src="mi_foto_boda_v31.png" alt="Logo Alejandro y Andrea">
    </div>

    <!-- Frase final -->
    <div class="mensaje-final">Gracias por acompañarnos en este camino tan especial.<br></div>

    <footer>© Alejandro & Andrea</footer>
  </div>

  <!-- MODAL ASISTENCIA -->
  <div id="asistenciaModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="asistenciaTitle">
    <div class="modal-content asistencia-content">
      <button id="closeAsistencia" aria-label="Cerrar formulario" class="close-btn">
        <img src="mi_foto_boda_v36.png" alt="Cerrar">
      </button>

      <div class="asistencia-title">
        <img src="mi_foto_boda_v32.png" alt="Cuestionario de asistencia">
        <h3>CUESTIONARIO DE ASISTENCIA</h3>
      </div>

      <form id="rsvpForm"
        action="https://script.google.com/macros/s/AKfycbyR0kDkPjKhyVGAqirWjeG7KxL917Tz1tfJOo17r6v06V4JT2cPcjjHyYR8_CvZ_Ab-Kg/exec"
        method="POST" novalidate>
        <div class="grid">
          <div class="row">
            <label for="nombre">Nombre y apellidos *</label>
            <input id="nombre" name="nombre" type="text" required placeholder="Ej. Ana Pérez" />
          </div>

          <div class="row">
            <label>¿Asistirás a la boda? *</label>
            <div class="radio-row">
              <label class="chip"><input type="radio" name="asistencia" value="sí" required /><span>Sí</span></label>
              <label class="chip"><input type="radio" name="asistencia" value="no" required /><span>No</span></label>
            </div>
          </div>

          <div class="row">
            <label for="acompanantes">¿Cuántos acompañantes?</label>
            <input id="acompanantes" name="acompanantes" type="number" min="0" max="10" value="0" />
          </div>

      <div class="row" id="rowAcompanantesNombres">
  <label for="acompanantesNombres">Nombre y apellidos de los acompañantes</label>
  <input id="acompanantesNombres" name="acompanantesNombres" type="text"
         placeholder="Ej. Juan Gómez, María López..." />

  <!-- Espejos ocultos para compatibilidad con el GAS/Sheet -->
  <input type="hidden" name="acompanantes_nombres" id="acompanantes_nombres_mirror">
  <input type="hidden" name="nombres_acompanantes" id="nombres_acompanantes_mirror">
</div>


          <div class="row">
            <label>¿Utilizarás el servicio de autobús?</label>
            <div class="radio-row">
              <label class="chip"><input type="radio" name="autobus" value="sí" /><span>Sí</span></label>
              <label class="chip"><input type="radio" name="autobus" value="no" /><span>No</span></label>
            </div>
          </div>
        </div>

        <div class="row">
          <label for="alergias">¿Tienes alguna alergia, intolerancia o preferencia alimentaria?</label>
          <input id="alergias" name="alergias" type="text" placeholder="Ej. sin gluten, frutos secos, vegetariano..." />
        </div>

        <div class="row">
          <label for="mensaje">¿Qué canción te gusta para que suene en la fiesta?</label>
          <textarea id="mensaje" name="mensaje" placeholder=" "></textarea>
        </div>

        <div class="actions">
          <button type="submit">Enviar confirmación</button>
        </div>
      </form>

      <div class="success" id="successBox" role="status" aria-live="polite">
        <h3>¡Gracias por tu respuesta! 💌</h3>
        <p>Hemos registrado tu confirmación. Puedes cerrar esta página.</p>
      </div>

      <div class="error" id="errorBox" role="alert">
        <h3>Vaya, algo no ha ido bien…</h3>
        <p>Inténtalo de nuevo en unos segundos o avisa a los novios.</p>
      </div>
    </div>
  </div>

  <!-- MODAL TRASLADO -->
  <div id="trasladoModal" class="modal">
    <div class="modal-content traslado-content">
      <button class="close-btn" id="closeTraslado">
        <img src="mi_foto_boda_v36.png" alt="Cerrar">
      </button>
      <div style="text-align:center;">
        <img src="mi_foto_boda_v29.png" alt="Traslado" style="width:60px;margin-bottom:10px;">
        <h3 class="modal-title">Traslado de invitados</h3>
        <p>
          Cuando se acerque nuestro gran día, aquí encontraréis todos los detalles sobre el servicio de autobuses.
          Compartiremos los horarios y puntos de recogida en Pamplona para acompañarnos hasta el banquete en el Palacio de Olloqui,
          así como el regreso tras la fiesta para volver cómodamente a Pamplona.
          ¡Queremos que disfrutéis al máximo, sin preocuparos de nada más que de celebrar con nosotros!
        </p>
      </div>
    </div>
  </div>

  <!-- MODAL UBICACIÓN -->
  <div id="ubicacionModal" class="modal">
    <div class="modal-content ubicacion-content">
      <button class="close-btn" id="closeUbicacion">
        <img src="mi_foto_boda_v36.png" alt="Cerrar">
      </button>
      <div style="text-align:center;">
        <img src="mi_foto_boda_v28.png" alt="Ceremonia" style="width:60px;margin-bottom:10px;">
        <h3 class="modal-title">Ceremonia religiosa</h3>
        <p>
          La ceremonia religiosa tendrá lugar en la Catedral de Santa María la Real de Pamplona,
          un lugar único y lleno de historia que hemos elegido para dar el "sí quiero".<br>
          Os esperamos el 17 de octubre de 2026 a las 12:00 del mediodía,
          para compartir junto a nosotros este momento tan especial.
        </p>
        <p>
          📍 <a href="https://www.google.com/maps/search/?api=1&query=42.819637,-1.641684" target="_blank">Ver ubicación en Google Maps</a>
        </p>

        <br>
        <img src="mi_foto_boda_v34.png" alt="Banquete" style="width:60px;margin-bottom:10px;">
        <h3 class="modal-title">Banquete</h3>
        <p>
          Continuaremos compartiendo este día tan especial en el Palacio Cabo de Armería de Olloqui,
          un entorno con encanto donde disfrutaremos juntos de la comida, la celebración y, por supuesto,
          la fiesta hasta el final.
        </p>
        <p>
          📍 <a href="https://www.google.com/maps/search/?api=1&query=42.840699,-1.581877" target="_blank">Ver ubicación en Google Maps</a>
        </p>
      </div>
    </div>
  </div>

  <!-- MODAL RECUERDOS -->
  <div id="recuerdosModal" class="modal">
    <div class="modal-content recuerdos-content">
      <button class="close-btn" id="closeRecuerdos">
        <img src="mi_foto_boda_v36.png" alt="Cerrar">
      </button>
      <div style="text-align:center;">
        <img src="mi_foto_boda_v38.png" alt="Cámara" style="width:60px;margin-bottom:8px;">
        <h3 class="modal-title">Rincón de los recuerdos</h3>
        <p>
          El día de nuestra boda estará inmortalizado por un fotógrafo profesional 📷,
          así que no os preocupéis, ¡tendremos fotos oficiales de cada momento!
          Pero también queremos ver la celebración a través de vuestros ojos 👀.
          Por eso, os invitamos a subir aquí todas las fotos espontáneas que hagáis con vuestro móvil:
          esos instantes divertidos, naturales y únicos que solo vosotros podéis captar.
        </p>

        <form id="recuerdosForm">
          <label for="foto" class="file-label">📸 Seleccionar fotos</label>
          <input type="file" id="foto" name="foto" accept="image/*" multiple>
          <div id="recuerdosMsg"></div>
          <button type="submit">Enviar fotos</button>
        </form>
      </div>
    </div>
  </div>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const pageWrapper = document.getElementById("page-wrapper");
    const modales = document.querySelectorAll(".modal");

    function closeAllModals() {
      modales.forEach(modal => modal.classList.remove("show"));
      if (pageWrapper) pageWrapper.classList.remove("blurred");
      history.pushState(null, "", location.href.split("#")[0]);
      const menuToggle = document.getElementById("menuToggle");
      if (menuToggle) menuToggle.style.display = "block";
    }

    function setupModal(openBtnId, modalId, closeBtnId) {
      const openBtn = document.getElementById(openBtnId);
      const modal = document.getElementById(modalId);
      const closeBtn = document.getElementById(closeBtnId);
      const menuToggle = document.getElementById("menuToggle");
      if (!openBtn || !modal || !closeBtn) return;

      openBtn.addEventListener("click", () => {
        modal.classList.add("show");
        if (pageWrapper) pageWrapper.classList.add("blurred");
        if (menuToggle) menuToggle.style.display = "none";
        history.pushState({ modal: modalId }, "", "#" + modalId);
      });

      closeBtn.addEventListener("click", () => { closeAllModals(); });

      modal.addEventListener("click", (e) => {
        if (e.target === modal) { closeAllModals(); }
      });

      document.addEventListener("keydown", (e) => { if (e.key === "Escape") { closeAllModals(); } });
    }

    /* Configurar todos */
    setupModal("asistenciaBtn", "asistenciaModal", "closeAsistencia");
    setupModal("trasladoBtn", "trasladoModal", "closeTraslado");
    setupModal("ubicacionBtn", "ubicacionModal", "closeUbicacion");
    setupModal("recuerdosBtn", "recuerdosModal", "closeRecuerdos");

    window.addEventListener("popstate", closeAllModals);

    /* Cuenta atrás */
    const weddingDate = new Date("Oct 17, 2026 12:00:00").getTime();
    const daysEl = document.getElementById("days");
    const hoursEl = document.getElementById("hours");
    const minutesEl = document.getElementById("minutes");
    const secondsEl = document.getElementById("seconds");

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = weddingDate - now;
      if (distance <= 0) {
        const countdown = document.getElementById("countdown");
        if (countdown) countdown.innerHTML = "💍 ¡Hoy es el gran día!";
        return;
      }
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      if (daysEl) daysEl.textContent = days;
      if (hoursEl) hoursEl.textContent = hours;
      if (minutesEl) minutesEl.textContent = minutes;
      if (secondsEl) secondsEl.textContent = seconds;
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);

    /* Formulario asistencia */
    const form = document.getElementById("rsvpForm");
    if (form) {
      const successBox = document.getElementById("successBox");
      const errorBox = document.getElementById("errorBox");
      const submitBtn = form.querySelector("button[type='submit']");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        submitBtn.disabled = true;
        const spinner = document.createElement("span");
        spinner.textContent = " ⏳";
        submitBtn.appendChild(spinner);

        const data = new FormData(form);
        try {
          const response = await fetch(form.action, {
            method: form.method,
            body: data,
            headers: { "Accept": "application/json" }
          });

          if (response.ok) {
            form.style.display = "none";
            errorBox.style.display = "none";
            successBox.style.display = "block";
            setTimeout(() => {
              successBox.style.display = "none";
              form.style.display = "block";
              submitBtn.disabled = false;
              spinner.remove();
              form.reset();
              closeAllModals();
            }, 3000);
          } else throw new Error("Error en el envío");
        } catch (err) {
          successBox.style.display = "none";
          errorBox.style.display = "block";
          setTimeout(() => {
            errorBox.style.display = "none";
            form.style.display = "block";
            submitBtn.disabled = false;
            spinner.remove();
          }, 3000);
        }
      });
    }

    /* Campo acompañantes */
    const acompanantesInput = document.getElementById("acompanantes");
    const rowAcompanantesNombres = document.getElementById("rowAcompanantesNombres");
    if (acompanantesInput && rowAcompanantesNombres) {
      acompanantesInput.addEventListener("input", () => {
        const value = parseInt(acompanantesInput.value, 10);
        rowAcompanantesNombres.classList.toggle("show", value > 0);
      });
    }

    /* Formulario recuerdos */
    const recuerdosForm = document.getElementById("recuerdosForm");
    const recuerdosMsg = document.getElementById("recuerdosMsg");
    const fileInput = document.getElementById("foto");

    if (recuerdosForm && fileInput && recuerdosMsg) {
      recuerdosForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        recuerdosMsg.innerHTML = "";
        const files = fileInput.files;
        const submitBtn = recuerdosForm.querySelector('button[type="submit"]');

        if (files.length === 0) {
          recuerdosMsg.textContent = "⚠️ Selecciona al menos una foto.";
          return;
        }

        submitBtn.disabled = true;
        const spinner = document.createElement("span");
        spinner.textContent = " ⏳";
        submitBtn.appendChild(spinner);

        for (const file of files) {
          try {
            const reader = new FileReader();
            const base64 = await new Promise((resolve, reject) => {
              reader.onloadend = () => resolve(reader.result.split(",")[1]);
              reader.onerror = reject;
              reader.readAsDataURL(file);
            });

            const response = await fetch("https://script.google.com/macros/s/AKfycbwN9bUuAkucwZ3kpuYLdzDqGfnIgwzyQ-q5Wz5qxleE4LRKk5_A0nZ459TZrk4E9WZDvQ/exec", {
              method: "POST",
              body: new URLSearchParams({
                foto: base64,
                nombreArchivo: file.name,
                mimeType: file.type
              })
            });

            const result = await response.json();
            recuerdosMsg.innerHTML += result.status === "ok"
              ? `✅ ${file.name} subida correctamente<br>`
              : `❌ Error al subir ${file.name}<br>`;
          } catch (err) {
            recuerdosMsg.innerHTML += `⚠️ Fallo al subir ${file.name}: ${err.message}<br>`;
          }
        }

        submitBtn.disabled = false;
        spinner.remove();
      });

      fileInput.addEventListener("change", () => {
        if (fileInput.files.length === 0) recuerdosMsg.textContent = "";
        else if (fileInput.files.length === 1)
          recuerdosMsg.textContent = `📷 ${fileInput.files[0].name}`;
        else
          recuerdosMsg.textContent = `📷 ${fileInput.files.length} archivos seleccionados`;
      });
    }

    /* Menú hamburguesa */
    const menuToggle = document.getElementById("menuToggle");
    const menuDropdown = document.getElementById("menuDropdown");

    if (menuToggle && menuDropdown) {
      menuDropdown.classList.remove("show");
      menuToggle.style.display = "block";

      menuToggle.addEventListener("click", (e) => {
        e.stopPropagation();
        menuDropdown.classList.toggle("show");
      });

      menuDropdown.querySelectorAll("a").forEach(link => {
        link.addEventListener("click", () => { menuDropdown.classList.remove("show"); });
      });

      document.addEventListener("click", (e) => {
        if (!menuDropdown.contains(e.target) && !menuToggle.contains(e.target)) {
          menuDropdown.classList.remove("show");
        }
      });
    }

    /* Aparición suave de botones (opcional) */
    const modalButtons = document.querySelectorAll('.icon-button');
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('show');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });

    modalButtons.forEach((btn, index) => {
      btn.style.transitionDelay = `${index * 0.2}s`;
      observer.observe(btn);
    });
  });
  </script>
</body>
</html>











































































































































